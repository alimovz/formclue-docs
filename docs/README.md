# **How FormClue Script Works**

FormClue is a session-intelligence and form-analytics platform that certifies and validates every form submission on your website. Think of it as a recording + forensic engine that **proves a user actually visited your site and submitted the form** ‚Äî protecting you from claims of unsolicited contact or TCPA violations. It also helps you filter out bot traffic and fraudulent submissions, ensuring you only work with real, human interactions.

---

## Step 1: Verify Your Domain

Before FormClue can certify submissions, you need to verify your domain in the back office:

**üëâ [Verify Your Domain](https://dash.formclue.io/dashboard/domains)**

Once your domain is verified, FormClue will automatically start monitoring and certifying all form interactions on that domain.

---

## Step 2: Add the FormClue Script

Next, grab your unique FormClue tracking script from your dashboard:

**üëâ [Get Your Script](https://dash.formclue.io/dashboard/certify)**

Copy the script and paste it at the **bottom of your page**, just before the closing `</body>` tag.

> **üí° Tip:** Placing the script at the bottom ensures your page content loads first, keeping performance optimal. With that said, placing it in other parts of the page will still work.

---

## Step 3: What Happens When the Script Loads

Once the FormClue script loads on your page, here's what happens automatically:

### ‚úÖ **FormClue Detects All Forms**
The script scans your page and identifies every `<form>` element.

### ‚úÖ **Hidden Certification Fields Are Injected**
FormClue **automatically appends 2 hidden fields** to every form on your page:

1. **Certificate ID** ‚Äî A unique identifier for this specific session/submission
2. **Replay Link** ‚Äî A direct link to view the certified replay in your dashboard

These fields look like this in your form's HTML:

```html
<input type="hidden" name="fc_cert_id" value="xxxxxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx-xxxx">
<input type="hidden" name="fc_cert_lookup_link" value="https://dash.formclue.io/dashboard/lookup?cert_id=xxxxxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx-xxxx">
```
---

## Step 4: Verify Leads with Certification Data

When a user submits a form, the **hidden fields are submitted along with the rest of the form data**.

This means when you (or your CRM, email system, or webhook) receive the lead, you'll have:

| Field | Purpose |
|-------|---------|
| `fc_cert_id` | Unique certificate ID for this submission |
| `fc_cert_lookup_link` | Direct link to replay the session and verify authenticity |

### üîç **How to Use the Certification Data**

#### Option 1: Click the Replay Link
Simply open the `fc_cert_lookup_link` in your browser to watch a **high-fidelity replay** of exactly how the user filled out the form:
- See what they typed, corrected, and changed
- Detect bot-like behavior or suspicious patterns
- Verify the lead is legitimate before spending time or money on it

#### Option 2: Use the FormClue API for Validation & Retention
You can programmatically validate and retain certifications using the **FormClue Client API** (documented below):

**Validation Options:**
- **Verify email or phone association** ‚Äî Confirm that a specific email address or phone number is tied to a certificate ID
- **Check for form submission** ‚Äî Detect whether a form submit event was captured on the page
- **Retain the certificate** ‚Äî Store the certification in your account for **5 years** as permanent proof of consent or submission

**Example Use Cases:**
- Validate a lead in your CRM before calling or emailing them
- Automatically flag and filter out certificates without form submissions
- Retain high-value certifications for long-term compliance and legal protection

> **üí° Pro Tip:** Retaining a certificate ensures the replay data is preserved for 5 years, giving you ironclad proof against unsolicited contact claims or regulatory audits.

---
# **Bot Detection**

FormClue employs a sophisticated, multi-factor bot detection system designed to validate the authenticity of every user session. By analyzing browser integrity, hardware capabilities, and behavioral biometrics, we assign a **Bot Score** to every generated certificate.

This ensures that the leads you purchase or verify are generated by real humans, protecting your budget from automated scripts, scrapers, and headless browsers.

## The Bot Score

Every certificate is assigned a probability score ranging from **0 to 100**. This score represents the likelihood that the session was initiated by automated software.

| Score Range  | Classification   | Description |
|:-------------|:-----------------| :--- |
| **0 - 30**   | **Likely Human** | High-confidence human behavior. Validated interaction patterns (mouse curves, touch gestures) and clean browser environment. |
| **31 - 79**  | **Suspicious**   | Inconclusive or irregular behavior. May indicate privacy-hardened browsers, unusual device configurations, or extremely low activity. |
| **80 - 100** | **Likely Bot**   | High-confidence automated traffic. Detected signals such as WebDriver usage, headless environments, or superhuman input speeds. |

> **Recommendation:** For the highest quality assurance, we recommend accepting leads with a score of **30 or below**.

## **How It Works**

Our detection engine runs silently in the background of the user session, utilizing a "Passive Analysis" approach. Rather than relying on simple CAPTCHAs that disrupt the user experience, we analyze three core dimensions of the session:

1.  **Behavioral Biometrics**  
    We analyze how the user interacts with the page over time‚Äîincluding mouse movement patterns, touch gestures, scrolling behavior, and typing rhythm. Humans have natural variances in their movements; bots are often mechanically perfect or suspiciously idle.

2.  **Browser & Device Integrity**  
    We validate that the browser environment matches the claimed device type. This includes checking for hardware capabilities (such as touch support on mobile devices) and identifying inconsistencies common in "spoofed" user agents.

3.  **Automation Fingerprinting**  
    We scan for technical signatures left behind by automation software (such as Selenium, Puppeteer, or Playwright) and headless browsers.


---

# **Domain Verification**

This section will walk you through how to verify a domain in FormClue.

---

## **DNS Verification**

To verify your domain ownership, you'll need to add a TXT record to your domain's DNS settings. Follow the steps below to complete the verification process.

### **Step 1: Create a TXT Record**

1. Log in to your domain registrar or DNS hosting provider (e.g., GoDaddy, Cloudflare, Namecheap, Route 53)
2. Navigate to your DNS management section
3. Create a new TXT record with the following details:

**Host/Name Field:**
```
_formclue
```

**Record Type:**
```
TXT
```

**Value/Content Field:**

Copy the unique verification key provided in the FormClue interface. It will look similar to this:
```
y0fl595xl......pgf5fqhgbk1bx
```

> **Note:** Your verification key is unique to your domain. Make sure to copy the exact value shown in your FormClue dashboard, not the example above.
>
> **Example:**
>
> ![DNS Verification Example](https://formclue.io/images/docs/dns_verification.png)

### **Step 2: Save the DNS Record**

After entering all the required information, save or publish the DNS record through your DNS provider's interface.

> **Important:** DNS changes can take anywhere from a few seconds to 48 hours to propagate, though most changes take effect within a few minutes.

### **Step 3: Verify Your Domain**

1. Return to the FormClue domain verification page
2. Click the **"Verify by DNS"** button
3. FormClue will check your DNS records for the TXT record
4. If the record is found, your domain will be verified successfully

> **üí° Pro Tip:** After adding the DNS records and clicking the "Verify by DNS" button, FormClue will automatically retry verification in the background if the initial attempt is unsuccessful due to DNS propagation delays. There is no need to manually refresh or repeatedly click the verification button. Once your DNS records have fully propagated, the system will automatically detect the changes and mark your domain as verified. Simply ensure the TXT record has been added correctly, and FormClue will handle the verification process.


# **Placing FormClue Script**

This section will walk you through how to place FormClue's script on your site.

---

## **Auto Mode**

You may load the FormClue (FC) script in Auto Mode. 
In Auto Mode the recorder is initialized automatically when 
the FC script is loaded and begins capturing user interactions 
immediately. Recording continues until the user 
leaves the page (e.g., closes the tab/window or navigates away).
Use Auto Mode when you want continuous, page-level capture
with no manual lifecycle control. **This is the default mode.**

Technical summary:
- Activation: automatic on script load.
- Lifecycle: starts on load; stops on page unload/navigation.
- Use case: full-page capture, minimal integration work.

## **Manual Mode**

Example of enabled Manual Mode in your control panel: https://dash.formclue.io/dashboard/certify ‚Äî open the Advanced Options dropdown.

![Manual Mode Enabled](https://formclue.io/images/docs/manual_mode.png)

Manual Mode provides explicit programmatic control over the recorder lifecycle. When Manual Mode is enabled in your FormClue configuration (see admin/UI), the page gains access to two public API functions:

- `FormClue.startRecorder()`
- `FormClue.stopRecorder()`

Note: These functions are exposed on the global FormClue object (accessible as window.FormClue in browser contexts).


**API**
- `FormClue.startRecorder()`: void
    - Begins a new recording session. Each call to `FormClue.startRecorder()` generates a new certificate ID which is injected into the page as a hidden field on all forms (so form submissions can be associated with the current recording session).
    - Do not call `FormClue.startRecorder()` repeatedly unless you intend to start distinct recording sessions; each invocation produces a new certificate ID.
- `FormClue.stopRecorder()`: void
    - Stops the active recording session. Use this to end capture when you no longer need to record user interactions.

**Usage patterns**
- Targeted section recording (recommended for multi-form / co-reg / multi-section apps)
    - Scenario: a single page application (SPA) or a page with multiple forms where you only want to record a specific part of the user journey.
    - Pattern:
        1. Keep the FC script included on the page (Manual Mode enabled).
        2. When the target section becomes active, call `FormClue.startRecorder()`.
        3. When the target section is complete, call `FormClue.stopRecorder()`.
        4. You may call `FormClue.startRecorder()` again later in the same session to record another discrete segment; each start generates a new certificate ID and subsequent hidden field value.

**Code examples**

- Manual start/stop around an application section:

```javascript
function onSectionEnter() {
    // begin recording for this section
    window.FormClue && window.FormClue.startRecorder();
}
```

```javascript
function onSectionExit() {
    // stop recording when the section is finished
    window.FormClue && window.FormClue.stopRecorder();
}
```

- Or start/stop recorder on button click:

```javascript
document.getElementById('start-btn').addEventListener('click', function (e) {
    window.FormClue && window.FormClue.startRecorder();
});

document.getElementById('stop-btn').addEventListener('click', function (e) {
    window.FormClue && window.FormClue.stopRecorder();
});
```

`FormClue.startRecorder()` and `FormClue.stopRecorder()` can be called
from anywhere on your page.

**Best practices and important notes**
- Ensure the FC script is present on the page before calling the API. Use an onload handler for dynamically inserted scripts or perform a runtime check (window.FormClue).
- Each startRecorder call generates a certificate ID that is attached as a hidden field to all forms on the page. Plan your integration so that certificate lifecycle aligns with your form submission flow.
- Avoid starting a recorder for prolonged or unnecessary segments; prefer targeted starts/stops to minimize captured data and reduce noise.
- Calling startRecorder multiple times in a single page session will create multiple certificate IDs (one per start). The latest start replaces the active certificate for subsequent form submissions until another start occurs.
- stopRecorder halts capture immediately; subsequent form submissions will continue to include whichever certificate ID was last applied (unless a new startRecorder call replaces it). Verify this behavior against your environment if you require different semantics.

**Troubleshooting**
- If startRecorder/stopRecorder are undefined, confirm Manual Mode is enabled in your FormClue configuration and that the FormClue script has finished loading.
- If forms are not receiving the hidden certificate field after startRecorder, ensure the forms exist in the DOM at the time of the call or re-run startRecorder after dynamic form insertion so the hidden field can be attached.
- For SPA route transitions, call stopRecorder prior to unmounting the recorded section and startRecorder when the target section mounts to ensure certificates are scoped correctly.



# **FormClue API Documentation**

Welcome to the **FormClue API**. Use this API to manage certificates and track your lead data.

---

## üîë Get Your API Key

Create your API key here:  
[https://dash.formclue.io/profile/api](https://dash.formclue.io/profile/api)

All requests **must** include your API key in the header:

`api_key: xxxxxxxxxxx-xxxx`


---

## üåê API Base URL

**All endpoints start with:**

`https://api.formclue.io/v1.0/clientapi`


---

## üß™ Test Your API Key

**Test your key with this GET request:**

```bash
curl -X GET https://api.formclue.io/v1.0/clientapi/test \
     -H "api_key: xxxxxxxxxxx-xxxx" \
     -H "Content-Type: application/json"
```

**Success Response:**
```json
{
    "msg": "ok",
    "company": "[YOUR COMPANY NAME]"
}
```
**Bad Response:**
```json
{
    "msg": "error",
    "descr": "description of error"
}
```

## üì• Retain a Certificate
**To retain a certificate, make a GET request:**

```bash
curl -X GET https://api.formclue.io/v1.0/clientapi/retain/{certificate_id} \
     -H "api_key: xxxxxxxxxxx-xxxx" \
     -H "Content-Type: application/json"
```

**Success Response:**
```json
{
    "msg": "ok",
    "descr": "Certificate [cert_id_here] is retained",
    "credits": "[number of credits left]"
}
```
**Bad Response:**
```json
{
    "msg": "error",
    "descr": "description of error"
}
```

## ‚úÖ Check Form Submission
The following API call allows you to check if a form submission
was detected during the certificate's web session. Form submissions
are a valuable action on the part of the user and strongly indicate
he or she took action while on the page.

**To check if a cert has a form submission associate with it, make the following GET request**

```bash
curl -X GET https://api.formclue.io/v1.0/clientapi/ifsubmit/{certificate_id} \
     -H "api_key: xxxxxxxxxxx-xxxx" \
     -H "Content-Type: application/json"
```

**Success Response:**
```json
{
    "msg": "ok",
    "ifsubmit": true
}
```
`ifsubmit` will have one of two values: `true` or `false`. `true` means
a form submission was detected on the page, `false` means no submissions
were detected.

**Bad Response:** (means something went wrong during your 
request, and we could not return a result)
```json
{
    "msg": "error",
    "descr": "description of error"
}
```



## üìú Validate Certificate
The Validate Certificate endpoint allows you to confirm that a 
given certificate ID is valid and that the specified email 
and/or phone number are indeed associated with it in FormClue‚Äôs records.

This endpoint is primarily used by lead buyers to ensure that
a received Certificate ID corresponds to a legitimate lead 
certified by FormClue.

**Example POST request**

```bash
curl -X POST https://api.formclue.io/v1.0/clientapi/validate/{certificate_id} \
     -H "api_key: xxxxxxxxxxx-xxxx" \
     -H "Content-Type: application/json"
     -d '{
           "email": "lead@example.com",
           "phone": "5551234567"
         }'
```

You may pass either `email`, `phone`, or both.

If both are passed, both must match for the certificate to be verified.

If only one field is passed, FormClue will validate based solely on that field.

---

**Success Response:**
```json
{
    "msg": "ok",
    "verified": true
}
```
`verified` will have one of two values: `true` or `false`. `true` means
the certificate does associate with your email and/or phone, `false` means
FormClue did not associate posted email/phone with the certificate, which
fails validation.

**Bad Response:** 
```json
{
    "msg": "error",
    "descr": "description of error"
}
```



# **Code Examples**
## Retaining a Certificate

**Node:**
```javascript
const CERT_ID = "xxxxxxxx-a7c3-4689-bece-xxxxxxxxx-1565"; // Replace with your cert ID
const API_KEY = "YOUR_API_KEY_HERE"; // Replace with your API key
const BASE_URL = "https://api.formclue.io/v1.0/clientapi";

async function retainCert(certId) {
  try {
    const response = await fetch(`${BASE_URL}/retain/${certId}`, {
      method: "GET",
      headers: {
        "api_key": API_KEY,
        "Content-Type": "application/json"
      }
    });

    const data = await response.json();

    if (data.msg === "ok") {
      console.log(`Success! ${data.descr}`);
      console.log(`Credits left: ${data.credits}`);
    } else {
      console.error(`Error: ${data.descr}`);
    }
  } catch (err) {
    console.error("Request failed:", err);
  }
}

// Run the function
retainCert(CERT_ID);

```

**PHP:**
```php
<?php
$cert_id = "xxxxxxxx-a7c3-4689-bece-xxxxxxxxx-1565"; // Replace with your cert ID
$api_key = "YOUR_API_KEY_HERE"; // Replace with your API key
$base_url = "https://api.formclue.io/v1.0/clientapi";

// Initialize cURL
$ch = curl_init();

// Set URL and headers
curl_setopt($ch, CURLOPT_URL, "$base_url/retain/$cert_id");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    "api_key: $api_key",
    "Content-Type: application/json"
]);

// Execute request
$response = curl_exec($ch);

// Check for errors
if (curl_errno($ch)) {
    echo "cURL Error: " . curl_error($ch);
} else {
    $data = json_decode($response, true);

    if ($data['msg'] === 'ok') {
        echo "Success! " . $data['descr'] . PHP_EOL;
        echo "Credits left: " . $data['credits'] . PHP_EOL;
    } else {
        echo "Error: " . $data['descr'] . PHP_EOL;
    }
}

// Close cURL
curl_close($ch);

```


## Validating a Certificate

**Node:**
```javascript
const axios = require('axios');

// Replace with your actual certificate ID and API key
const certificateId = 'xxxxxxxx-a7c3-4689-bece-xxxxxxxxx-1565';
const apiKey = 'YOUR_API_KEY_HERE';

const payload = {
  email: 'lead@example.com',
  phone: '5551234567'
};

async function validateCertificate() {
  try {
    const response = await axios.post(
      `https://api.formclue.io/v1.0/clientapi/validate/${certificateId}`,
      payload,
      {
        headers: {
          'api_key': apiKey,
          'Content-Type': 'application/json'
        }
      }
    );

    console.log('Response:', response.data);
  } catch (error) {
    if (error.response) {
      // Server returned an error response
      console.error('Error response:', error.response.data);
    } else {
      // Network or other error
      console.error('Error:', error.message);
    }
  }
}

validateCertificate();

```